#!/bin/bash
#переходим в папку где нужно создавать файлы
cd /tmp/investigation
touch processes_list.txt
#выводим табличку с процессами java в созданный файл (столбцы: UID PID PPID C STIME TTY TIME CMD)
ps -fC java > processes_list.txt
#перебираем построчно файл со списком процессов и наполняем файлы согласно идентификатору процесса
cat processes_list.txt | awk '{
  pid = $2;
  print >> access_$pid.txt}'
#если я правильно разобрался в работе awk и command_output >>,
#то awk должен построчно перебрать файл со списком процессов java,
#каждый раз занося значение второго поля (оно у нас PID) в переменную pid,
#а печать обрабатываемой строки перенаправляться в создаваемый файл access_$pid,
#который у нас именуется в соответствии со значением переменной pid,
#если такой файл уже существует строка вывода дописывается в конец существующего файла
